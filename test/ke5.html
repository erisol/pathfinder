<div id="container" style="background: #CCC;">
	<!--<img id="kart" src="kart/kart_KE_5etg.jpg" width="2182" height="1092" />-->
</div>

    <script src="http://d3lp1msu2r81bx.cloudfront.net/kjs/js/lib/kinetic-v4.5.5.min.js"></script>
<script type='text/javascript'>//<![CDATA[ 
$(window).load(function(){
var stage = new Kinetic.Stage({
    container: 'container',
    width: newWidth,
    height: newHeight-80
	
});
var layer = new Kinetic.Layer();
stage.add(layer);


// parentGroup is used in jquery events
// so make it global
var parentGroup;
var zoomInButton = 0;
var zoomOutButton = 3;

// load the image and then start the app
var image = new Image();
image.onload = function () {
    start();
}
image.src = "kart/kart_KE_5etg.jpg";

// build everything, wire events
function start() {

    parentGroup = new Kinetic.Group({
        x: 0,
        y: 0,
        width: image.width,
        height: image.height,
        draggable: true,
		dragBoundFunc: function(pos) {
			  var X = pos.x;
			  var Y = pos.y;
			  
			  if (Y < -905) { Y=-905; }
			  if (X < -1000) { X=-1000; }
			  if(Y > 0) { Y=0; }
			  if(X > 0) { X=0; }
			  
			  return({y:Y,x:X});
			  
			  }
    });
    layer.add(parentGroup);

    var kImage = new Kinetic.Image({
        image: image,
        x: 0,
        y: 0,
        width: image.width,
        height: image.height
    });
    parentGroup.add(kImage);
    layer.draw();
	
	if(zoomOutButton == 3) {
		document.getElementById("zoomOut").setAttribute("disabled");
	}
	
    $("#zoomIn").click(function () {
        parentGroup.setScale(parentGroup.getScale().x + 0.15);
		zoomInButton++;
		zoomOutButton--;
			if (zoomOutButton < 0) zoomOutButton = 0;
		if (zoomOutButton < 3) {
			document.getElementById("zoomOut").removeAttribute("disabled");
		}
		if (zoomInButton == 3) {
			document.getElementById("zoomIn").setAttribute("disabled");
		}
        layer.draw();
    });

    $("#zoomOut").click(function () {
        parentGroup.setScale(parentGroup.getScale().x - 0.15);
		zoomOutButton++;
		zoomInButton--;
		if (zoomInButton < 0) zoomInButton = 0;
		if (zoomInButton < 3) {
			document.getElementById("zoomIn").removeAttribute("disabled");
		}
		if (zoomOutButton == 3) {
			document.getElementById("zoomOut").setAttribute("disabled");
		}
        layer.draw();
    });

}
});//]]>  

</script>
