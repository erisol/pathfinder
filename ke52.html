<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<script type='text/javascript' src='http://code.jquery.com/jquery-1.9.1.js'></script>
<title>Vis Vei UiS</title>
<style type="text/css">
body {
	margin: 0;
	padding: 0;
}

h1,h2,h3 {
	margin: 0;
	padding: 0;
}

#topbar {
	height: 79px;
	border-bottom: 1px solid #000;
	background-color: #09C;
	vertical-align: bottom;
}
#topbar img {
	margin-top: 30px;
	}
#canvas {
	text-align: center;
}
</style>
</head>
<body>
<script>
var newWidth  = document.documentElement.clientWidth;
var newHeight = document.documentElement.clientHeight;
document.getElementById("topbar").setAttribute("style",newWidth);
</script>


<div id="topbar">
	<img src="img/logo.png" />
    Jeg skal fra: 
<select name="fra">
<option value="#">ARRAY OVER ROM</option>
</select>
 og skal til: 
<select name="til">
<option value="#">ARRAY OVER ROM</option>
</select> 
Handicapped <input name="" type="checkbox" value="Handicapped?" />
<button>Vis Vei!</button>
</div>

<div style="float: left; margin-left: 20px; margin-top: 10px; background: #CCC; border: 1px solid #000; width: 150px; height: 100px; position: absolute; z-index: 1;">
<center>Kj√∏lv Egeland<br />
5. etasje<br />
<button id="zoomIn">Zoom in</button><br />
<button id="zoomOut">Zoom out</button>
</center>
</div>

<div id="container" style="background: #CCC;">
	<!--<img id="kart" src="kart/kart_KE_5etg.jpg" width="2182" height="1092" />-->
</div>

    <script src="http://d3lp1msu2r81bx.cloudfront.net/kjs/js/lib/kinetic-v4.5.5.min.js"></script>
<script type='text/javascript'>//<![CDATA[ 
$(window).load(function(){
var stage = new Kinetic.Stage({
    container: 'container',
    width: newWidth,
    height: newHeight-80
	
});
var layer = new Kinetic.Layer();
stage.add(layer);


// parentGroup is used in jquery events
// so make it global
var parentGroup;
var zoomInButton = 0;
var zoomOutButton = 3;

// load the image and then start the app
var image = new Image();
image.onload = function () {
    start();
}
image.src = "kart/kart_KE_5etg.jpg";

// build everything, wire events
function start() {

    parentGroup = new Kinetic.Group({
        x: 0,
        y: 0,
        width: image.width,
        height: image.height,
        draggable: true,
		dragBoundFunc: function(pos) {
			  var X = pos.x;
			  var Y = pos.y;
			  
			  if (Y < -905) { Y=-905; }
			  if (X < -1000) { X=-1000; }
			  if(Y > 0) { Y=0; }
			  if(X > 0) { X=0; }
			  
			  return({y:Y,x:X});
			  
			  }
    });
    layer.add(parentGroup);

    var kImage = new Kinetic.Image({
        image: image,
        x: 0,
        y: 0,
        width: image.width,
        height: image.height
    });
    parentGroup.add(kImage);
    layer.draw();
	
	if(zoomOutButton == 3) {
		document.getElementById("zoomOut").setAttribute("disabled");
	}
	
    $("#zoomIn").click(function () {
        parentGroup.setScale(parentGroup.getScale().x + 0.15);
		zoomInButton++;
		zoomOutButton--;
			if (zoomOutButton < 0) zoomOutButton = 0;
		if (zoomOutButton < 3) {
			document.getElementById("zoomOut").removeAttribute("disabled");
		}
		if (zoomInButton == 3) {
			document.getElementById("zoomIn").setAttribute("disabled");
		}
        layer.draw();
    });

    $("#zoomOut").click(function () {
        parentGroup.setScale(parentGroup.getScale().x - 0.15);
		zoomOutButton++;
		zoomInButton--;
		if (zoomInButton < 0) zoomInButton = 0;
		if (zoomInButton < 3) {
			document.getElementById("zoomIn").removeAttribute("disabled");
		}
		if (zoomOutButton == 3) {
			document.getElementById("zoomOut").setAttribute("disabled");
		}
        layer.draw();
    });

}
});//]]>  

</script>
  </body>
</html>
