<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="../style/reset.css" />
<script type="text/javascript" src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script type="text/javascript" src="EdgeTrimmer.js"></script>
<script type="text/javascript" src="edgefunctions.js"></script>
<title>Edge Maker</title>
</head>

<body>
<div style="width: 2482px; height: 1092px;">
	<div style="float:left; width: 300px; height: 1092px;">
    	<div style="float:left;z-index:10;position:fixed; width: 300px; overflow: auto; height: 100%; border-right: 3px solid #000; text-align: center; background-color: white">
        	<br />
        	<strong>Current Node Information:</strong><br />
        	<table width="295" border="0" cellspacing="0" cellpadding="0">
            	<tr>
                	<td>Room:</td>
                    <td><span id="curNodeRoom"> </span></td>
                </tr>
        		<tr>
                	<td>X-Coords:</td>
                	<td><span id="curNodeX"> </span></td>
                </tr>
        		<tr>
                	<td>Y-Coords:</td>
                	<td><span id="curNodeY"> </span></td>
                </tr>
        		<tr>
                	<td>Floor:</td>
                	<td><span id="curNodeFloor"> </span></td>
                </tr>
            </table>
            <br />
        	<table width="295" border="0" cellspacing="0" cellpadding="0">
        		<tr>
  		 			<td></td>
  					<td><input name="createEdge" type="button" value=" Make New Edge " onclick="makeNewEdge()" /></td>
  				</tr>
        	</table>
        	<br />
        	Create Edge Between:
        	<form name="edgeStore">
        		<table width="295" border="0" cellspacing="0" cellpadding="0">
  					<tr>
    					<td><Strong>Node 1</Strong></td>
    					<td><input name="node1Id" type="hidden" value=""></td>
  					</tr>
                    <tr>
    					<td>Room</td>
    					<td><input name="node1Room" type="text" maxlength="8" value="" readonly/></td>
  					</tr>
                    <tr>
    					<td>X-Coords</td>
    					<td><input name="node1X" type="text" maxlength="5" value="" readonly/></td>
  					</tr>
                    <tr>
    					<td>Y-Coords:</td>
    					<td><input name="node1Y" type="text" maxlength="5" value="" readonly/></td>
  					</tr>
                    <tr>
    					<td>Floor</td>
    					<td><input name="node1Floor" type="text" maxlength="4" value="" readonly/></td>
  					</tr>
  					<tr><td></td><td><input type="button" value=" Change Node 1" onclick="activate1()" /></td></tr>
				</table><br />
                <table width="295" border="0" cellspacing="0" cellpadding="0">
                    <tr>
    					<td><strong>Node 2</strong></td>
    					<td><input name="node2Id" type="hidden" value=""></td>
  					</tr>
                    <tr>
    					<td>Room</td>
    					<td><input name="node2Room" type="text" maxlength="8" value="" readonly/></td>
  					</tr>
                    <tr>
    					<td>X-Coords</td>
    					<td><input name="node2X" type="text" maxlength="5" value="" readonly/></td>
  					</tr>
                    <tr>
    					<td>Y-Coords</td>
    					<td><input name="node2Y" type="text" maxlength="5" value="" readonly/></td>
  					</tr>
                    <tr>
    					<td>Floor</td>
    					<td><input name="node2Floor" type="text" maxlength="4" value="" readonly/></td>
  					</tr>
   					<tr><td></td><td><input type="button" value=" Change Node 2" onclick="activate2()" /></td></tr>
                    </table><br />
                    <table width="295" border="0" cellspacing="0" cellpadding="0">
   					<tr>
    					<td>Type:</td>
                        <td><select id="edgeType" name="edgeType" style="width: 153px">
                            <option value="gang">Gang</option>
                            <option value="trapp">Trapp</option>
                            <option value="heis">Heis</option>
							</select>
    					</td>
  					</tr>
            		<tr>
    					<td>Change Floor:</td>
    					<td><select id="fVal" name="fval" style="Width:153px" onchange="checkSelectedFloor()">
    						<option value="1" selected>1</option>
    						<option value="2">2</option>
                       		<option value="3">3</option>
                       	 	<option value="4">4</option>
                       		<option value="5">5</option>
						</td>
  					</tr>
                </table><br />
                <input name="newEdge" type="button" value=" Add Edge " onclick="addEdge()" />
			</form>
			<br />
            Edges added:
            <ol id="theEdges"><br /></ol>
            <br /><br />
			<input type="button" name="saveEdges" id="saveEdges" value=" Save edges to file " onclick="saveEdges()"/>
            <br /><br />
            <input type="button" name="Trim Edges" id="TrimEdges" value=" Trim Edges " onclick="trimEdges()"/>
		</div>
	</div>
	<div id="canvasFloat" style="float:left;">
	<canvas id="makeEdgeCanvas" width="2182" height="1092">
    <script> 
 		$(document).ready(function(){
			loadNodes();
			loadEdges();
			nextId = currentIdVal();
			checkSelectedFloor();
  		});
		window.addEventListener('keypress', function (e) {
  			if (e.keyCode == 113) {
        		makeNewEdge();
    		}
			if (e.keyCode == 119) {
        		saveEdges();
    		}
			if (e.keyCode == 49) {
				activate1();
    		}
			if (e.keyCode == 50) {
        		activate2();
    		}
			if (e.keyCode == 97) {
        		addEdge();
    		}
		}, false);
	</script>
</div>  
</body>
</html>
