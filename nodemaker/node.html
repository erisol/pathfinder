<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="../style/reset.css" />
<script type="text/javascript" src="http://code.jquery.com/jquery-1.9.1.js"></script>
<title>Create nodes</title>
</head>
<body>
<div style="width: 4666px; height: 2184px;">
        <div style="float:left; width: 300px; height: 2184px;">
    	<div style="float:left;position:fixed;z-index:10; overflow:auto; width: 300px; height: 100%;border-right: 3px solid #000; text-align: center; background-color: white">
        <br /><br />
        <strong>Coordinates:
        <span id="mouseCoords"></span>
        </strong><br /><br />
        <br /><br />
        <table width="295" border="0" cellspacing="0" cellpadding="0">
        	<tr>
  		 		<td></td>
  				<td><input name="createNode" type="button" value=" Make New Node " onclick="drawNode()" /></td>
  			</tr>
            <tr>
            <td>Snap To</td></tr>
            <tr>
  		 		<td>X</td>
            <td><input type="checkbox" id="Xsnap" value="X"></td></tr>
  		 	<tr>	<td>Y</td>
			<td><input type="checkbox" id="Ysnap" value="Y"></td></tr>
        </table>
        <br /><br />
        Node information:
        </p>
        <form name="storeCoords">
        <table width="295" border="0" cellspacing="0" cellpadding="0">
  <tr>
    <td>X:</td>
    <td><input name="xVal" type="text" maxlength="4" value="" /></td>
  </tr>
  <tr>
    <td>Y:</td>
    <td><input name="yVal" type="text" maxlength="4" value="" /></td>
  </tr>
  <tr>
    <td>Floor:</td>
    <td><select id="fVal" name="fval" style="Width:153px" onchange="checkSelectedFloor()">
    <option value="1" selected>1</option>
    <option value="2">2</option>
    <option value="3">3</option>
    <option value="4">4</option>
    <option value="5">5</option></td>
  </tr>
  <tr>
    <td>Room:</td>
    <td><select id="roomnr" name="roomnr" style="width: 153px">
  <option value="gang">Gang</option>
 
	<script> 
 		$(document).ready(function(){
			checkSelectedFloor();
 	 		addrooms();
  		});
		window.addEventListener('keypress', function (e) {
  			if (e.keyCode == 113) {
        		drawNode();
    		}
			if (e.keyCode == 119) {
        		saveNodes();
    		}
			if (e.keyCode == 120) {
				var snap = document.getElementById("Xsnap");
				if(snap.checked){
					snap.checked = false;
				}else if(!snap.checked){
					snap.checked = true;	
				}
    		}
			if (e.keyCode == 121) {
        		var snap = document.getElementById("Ysnap");
				if(snap.checked){
					snap.checked = false;
				}else if(!snap.checked){
					snap.checked = true;	
				}
    		}
			if (e.keyCode == 97) {
        		addNode();
    		}
		}, false);
	</script>
</select>
    </td>
  </tr>
  <tr>
    <td></td>
    <td><input name="newNode" type="button" value=" Add node " onclick="addNode()" /></td>
  </tr>
</table>
	</form>
    <br /><br />
    
    Nodes added:
    <ol id="theNodes"><br /></ol>
    <br /><br />
     <input type="button" name="SaveNodes" id="SaveNodes" value=" Save nodes to file " onclick="saveNodes();"/>
    </div>
        </div>

        <div id="canvasFloat" style="float:left;">
        <canvas id="makeNodeCanvas" width="4363" height="2184">
<script>
	Array.prototype.checkId = function(value){
		for(var indx = 0; indx < this.length; indx++){
			var testArray = this[indx].split(",");
			if(testArray[0] == value){
				return indx;
			}
		}
		return -1;
	}
	
	var array1Floor = [];
	var array2Floor = [];
	var array3Floor = [];
	var array4Floor = [];
	var array5Floor = [];
	var yId = 0;
	var xId = 0;
	
	function checkSelectedFloor() {
		currentIdVal();
		var theCanvas = document.getElementById("makeNodeCanvas");
		var selectedFloor = parseInt(document.getElementById("fVal").value);
		switch (selectedFloor) {
			case 1:
				//clearGrids();
				clearNodes();
				theCanvas.setAttribute("style", "background: url(../kart/old_kart_KE_1etg.jpg)");
				//loadSelectedFloorGrid(selectedFloor);
				break;
			case 2:
				//clearGrids();
				clearNodes();
				theCanvas.setAttribute("style", "background: url(../kart/old_kart_KE_2etg.jpg)");
				//loadSelectedFloorGrid(selectedFloor);
				break;
			case 3:
				//clearGrids();
				clearNodes();
				theCanvas.setAttribute("style", "background: url(../kart/old_kart_KE_3etg.jpg)");
				//loadSelectedFloorGrid(selectedFloor);
				break;
			case 4:
				//clearGrids();
				clearNodes();
				theCanvas.setAttribute("style", "background: url(../kart/old_kart_KE_4etg.jpg)");
				//loadSelectedFloorGrid(selectedFloor);
				break;
			case 5:
				//clearGrids();
				clearNodes();
				theCanvas.setAttribute("style", "background: url(../kart/old_kart_KE_5etg.jpg)");
				//loadSelectedFloorGrid(selectedFloor);
				break;	
		}
	}
	
	function getMousePos(canvas, evt) {
    	var rect = canvas.getBoundingClientRect();
        return {
        	x: evt.clientX - rect.left,
          	y: evt.clientY - rect.top
        };
    }
    var canvas = document.getElementById('makeNodeCanvas');
    var context = canvas.getContext('2d');
	  
	function writeMessage(message) {
		var messageCoords = document.getElementById("mouseCoords");
		messageCoords.innerHTML = message; 
	}
	
    canvas.addEventListener('mousemove', function(evt) {
    	var mousePos = getMousePos(canvas, evt);
        var message = mousePos.x + ',' + mousePos.y;
    	writeMessage(message);
    }, false);
	
	currentFloor = 1;
	var nextId = 0;
	
	function getCurrentArray(){
		switch(currentFloor){
			case 1: 
			return array1Floor;
			break;
			
			case 2: 
			return array2Floor;
			break;
			
			case 3: 
			return array3Floor;
			break;
			
			case 4: 
			return array4Floor;
			break;
			
			case 5: 
			return array5Floor;
			break;
		}
	}
	function clearNodes(){
		var currentArray = getCurrentArray();
		var selectedFloor = parseInt(document.getElementById("fVal").value);
		switch(selectedFloor){
			case 1: 
			readArrayInfoAndAdd(currentArray,array1Floor);
			currentFloor = 1;
			break;
			
			case 2: 
			readArrayInfoAndAdd(currentArray,array2Floor);
			currentFloor = 2;
			break;
			
			case 3: 
			readArrayInfoAndAdd(currentArray,array3Floor);
			currentFloor = 3;
			break;
			
			case 4: 
			readArrayInfoAndAdd(currentArray,array4Floor);
			currentFloor = 4;
			break;
			
			case 5: 
			readArrayInfoAndAdd(currentArray,array5Floor);
			currentFloor = 5;
			break;
		}
	}
	var isChangingFloor = false;
	// nextId + "," + roomid + "," + xvalue +","+ yvalue +","+ fvalue;
	function readArrayInfoAndAdd(currentArray, fArray){
		isChangingFloor = true;
		for(var idx = 0; idx < currentArray.length; idx++){
			var currentNode = currentArray[idx].split(",");
			removeNode(parseInt(currentNode[0])+1);
		}
		
		for(var indx = 0; indx < fArray.length; indx++){
			var currentNode = fArray[indx].split(",");
			drawOldNode(currentNode[2], currentNode[3], currentNode[0]);
			addNodeToList(parseInt(currentNode[0])+1);
		}
		isChangingFloor = false;
	}
	
	function addToCurrentFloorArray(curFloor, node){
		var currentFloor = parseInt(curFloor);
		switch(currentFloor){
			case 1: 
			array1Floor[array1Floor.length] = node;
			break;
			
			case 2: 
			array2Floor[array2Floor.length] = node;
			break;
			
			case 3: 
			array3Floor[array3Floor.length] = node;
			break;
			
			case 4: 
			array4Floor[array4Floor.length] = node;
			break;
			
			case 5: 
			array5Floor[array5Floor.length] = node;
			break;
		}
	}
	
	var createExistingXgrid = new Array();
	var createExistingYgrid = new Array();
	var floorListArray = ["","grids/ke/1.txt", "grids/ke/2.txt", "grids/ke/3.txt", "grids/ke/4.txt", "grids/ke/5.txt"];
	function loadSelectedFloorGrid(n) {
		jQuery.ajax({
		url: floorListArray[n],
		dataType: 'text',
		type: "GET",
		cache: false,
  		success: function(data) {
    		var newArray = data.split(",");
			for (var i = 0; i<=newArray.length; i+=2) {
				if (newArray[i] == 0 && newArray[i+1] >= 0) {
					createExistingXgrid(newArray[i+1]);
					console.log("created 1 x grid: "+newArray[i+1]);
				} else if (newArray[i] >= 0 && newArray[i+1] == 0) {
					createExistingYgrid(newArray[i]);
					console.log("created 1 y grid: "+newArray[i]);
				} else {
					console.log("all grids were filled. no further grids were added");
				}
			}           
  		}
		});
	}
	var nodes = [array1Floor, array2Floor, array3Floor, array4Floor, array5Floor];
	var floorNodeListArray = ["","nodes/ke/1.txt", "nodes/ke/2.txt", "nodes/ke/3.txt", "nodes/ke/4.txt", "nodes/ke/5.txt"];
	function loadNodes(){
		for(var n = 0; n < floorNodeListArray.length-1; n++){
			jQuery.ajax({
			url: floorListArray[n],
			dataType: 'text',
			type: "GET",
			cache: false,
	  		success: function(data) {
	    		var newArray = data.split(",");
				for (var i = 0; i<=newArray.length; i+=5) {
					nodes[n][nodes[n].length] = newArray[i]+","+newArray[i+1]+","+newArray[i+2]+","+newArray[i+3]+","+newArray[i+4];
				}           
	  		}
			});
		}
	}
	
	function saveNodes(){
		if (array1Floor.length == 0 && array2Floor.length == 0 && array3Floor.length == 0 && array4Floor.length == 0 && array5Floor.length == 0) {
			console.log("the array is empty. nothing will be stored");
		} else {
			writeNodeToFile();
		}	
	}
	  
    function writeNodeToFile(){
		for(var i = 0;  i< floorNodeListArray.length-1; i++){
			var file = String(floorNodeListArray[i]);
			var data = nodes[i];
			var xmlhttp;
			if(window.XMLHttpRequest) {
				xmlhttp=new XMLHttpRequest();
			}else {
				xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
			}
			xmlhttp.open("GET","gridOperations.php?data="+data+"&file="+file,true);
			xmlhttp.send();
		}
	}
	
	function createExistingYgrid(topval) {
		var getCanvas = document.getElementById("canvasFloat");
		var newYgrid = document.createElement("div");
		var gridId = String("canvasGrid"+nextGrid);
		newYgrid.setAttribute("id", gridId);
		newYgrid.style.height = "1091px";
		newYgrid.style.width = "1px";
		newYgrid.style.cssFloat ="left";
		newYgrid.style.backgroundColor = "#FF0000";
		newYgrid.style.position = "absolute";
		newYgrid.style.left = "300px";
		newYgrid.style.top = topval;
		getCanvas.appendChild(newYgrid);
		addYGrid();
		nextGrid++;
	}
	
	function createExistingYgrid(leftVal) {
		leftVal = parseInt(leftVal) + 303;
		var getCanvas = document.getElementById("canvasFloat");
		var newYgrid = document.createElement("div");
		var gridId = String("canvasGrid"+nextGrid);
		newYgrid.setAttribute("id", gridId);
		newYgrid.style.height = "1091px";
		newYgrid.style.width = "1px";
		newYgrid.style.cssFloat ="left";
		newYgrid.style.backgroundColor = "#FF0000";
		newYgrid.style.position = "absolute";
		newYgrid.style.left = leftVal+"px";
		newYgrid.style.top = "0px";
		getCanvas.appendChild(newYgrid);
		addYGrid();
		nextGrid++;
	}
	  
	var placing = false;
	var oldsaved = true;
	function drawNode(){
		if(!placing){
			if(oldsaved){
				placing = true;
				oldsaved = false;
				var getCanvas = document.getElementById("canvasFloat");
				var node = document.createElement("div");
				var nodeId = String("nodediv"+nextId);
				node.setAttribute("id", nodeId);
				node.style.height = "6px";
				node.style.width = "6px";
				node.style.backgroundColor = "#FF0000";
				node.style.cssFloat ="left";
				node.style.left ="300";
				node.style.top = "0";
				node.style.position = "absolute";
				node.style.display = "visible";
				getCanvas.appendChild(node);
			}
			moveNode();
		}
	}
	
	function moveNode() {
		var newNode = ("#nodediv"+nextId)
		var runningBoolean = true;
			$("#canvasFloat").mousemove(function(e){
				if (runningBoolean) {
					$mouseX = snapToXGrid(e.pageX-303)+300;
					$mouseY = snapToYGrid(e.pageY-3); 
					$(newNode).css({top:$mouseY});
					$(newNode).css({left:$mouseX});
				} else {
					return;
				}
			});
			$("#canvasFloat").click(function(e) {
				var xvalue = document.getElementsByName("xVal");
				var yvalue = document.getElementsByName("yVal");
				var mousePos = getMousePos(canvas, e);
				xvalue[0].value = snapToXGrid(mousePos.x);
				yvalue[0].value = snapToYGrid(mousePos.y);
				runningBoolean = false;
				placing = false;
		});
	}
	
	function snapToYGrid(y){
		var yGrid = [0, 100, 200, 300, 400, 500, 600, 700, 800];
		if(document.getElementById("Ysnap").checked){
			yId = 0;
			for(var indx = 0; indx < yGrid.length; indx++){
				oldval = yGrid[yId]-y;
				newval = yGrid[indx]-y;
				if(oldval < 0){
					oldval = 0 - oldval;
				}
				if(newval < 0){
					newval = 0 - newval;
				}
				if(newval < oldval){
					yId = indx;	
				}
			}
			return yGrid[yId];
		}
		return y;
	}
	
	function snapToXGrid(x){
		var xGrid = [0, 100, 200, 300, 400, 500, 600, 700, 800];
		if(document.getElementById("Xsnap").checked){
			xId = 0;
			for(var indx = 0; indx < xGrid.length; indx++){
				oldval = xGrid[xId]-x;
				newval = xGrid[indx]-x;
				if(oldval < 0){
					oldval = 0 - oldval;
				}
				if(newval < 0){
					newval = 0 - newval;
				}
				if(newval < oldval){
					xId = indx;	
				}
			}
			return xGrid[xId];
		}
		return x;
	}
	
	function drawOldNode(x, y, oldId){
		var getCanvas = document.getElementById("canvasFloat");
		var node = document.createElement("div");
		var nodeId = String("nodediv"+oldId);
		node.setAttribute("id", nodeId);
		node.style.height = "6px";
		node.style.width = "6px";
		node.style.backgroundColor = "#FF0000";
		node.style.cssFloat ="left";
		node.style.left = (parseInt(x)+300)+"px";
		node.style.top = parseInt(y)+"px";
		node.style.position = "absolute";
		node.style.display = "visible";
		getCanvas.appendChild(node);
	}
	function addNode() {
		var xvalue = document.getElementsByName("xVal")[0].value;
		var yvalue = document.getElementsByName("yVal")[0].value;
		var fvalue = document.getElementById("fVal").value;
		var roomid = document.getElementById("roomnr").value;
		if((xvalue !== "" || yvalue !== "") && !oldsaved){
			var node = nextId + "," + roomid + "," + xvalue +","+ yvalue +","+ fvalue;
			addToCurrentFloorArray(fvalue, node);
			displayNodes();
			nextId++;
			oldsaved = true;
		}
		 document.getElementById("roomnr").selectedIndex = 0;
	}
	
	function getFloorArray(){
		//load array1Floor, array2Floor, array3Floor, array4Floor, array5Floor 
		return [array1Floor, array2Floor, array3Floor, array4Floor, array5Floor];
	}
	function getrooms(){
		//load rooms
		var loaded = "Administrasjon:,C104,A230B,A253C,C320c,C335||Andre rom:,E122C,E122,E131A,E151A,E153,E220A,E122B,E120,E151,E123,E121A,E221A,E120B,E122D,E131,D130,D136,D122A,D121B,D121D,D121,D135,D131C,D123D,D131D,D133,D136A,D131B,D130B,D130A,D123A,D123B,D131A,C161,C110B,C112A,C120,C163,C112,A143,A146A,A103,A148,A132,A135,A145,A156,A140,A142,A141,A113,A148A,A136,A147D,A147,A144,A137,A139,A146,A147F,A133A,A141B,A161,A147C,A161C,A133B,A133,A147E,A147B,A117,A102,A119,A147A,A111,A141A,A118,A115,A137B,A131,A145A,B101,A253B,A228D,A259,A228E,A228A,A261,A237,A230D,A266,A265A,A230C,A233,A233A,A251,A239,E375,D339,E358A,E377,C350G,E350B,D350B,C389A,C390,E398,E320C,C391,D335,E355A,C306,E356B,E385,C333,E330F,C389B,E352B,D353B,E320D,E451F,D442,E408B,E423F,E451D,E451E,D441,E420F,E406,E429A,E420E,Trapp,E450B,E451B,E408A,E451,E451A,E531A,E541A,E520D,E520,E543||Datarom:,E170,E168,E462,E472||Forelesningssal:,E164,E101,E102,E162,E166,D102,D102,D108,D102B,D103,C102,C185,C181,C160,A101,B104,F100,E268,E272,E262,E266,E264,E270,D207,D206,D225,D227,D201,D223,D205,D221,C285,C260,C289,C281,A205,A260,A262,A255,A252,A204,A201,A203,A252A,A257,A264,A202,D351,D302,D304B,D301,D303,E354,D304A,E464,E470B,E404A,E451C,E462B,E468,E401,E470,E466A||Grupperom:,D234,D232,D222,D238,D230,D228,D236,D226,D224,D240,C264,C270,C266,C282,C280,C276,C272,C262,C278,C284,C274,C268,C288,C286||Kafeteria:,A152,A159,Bok-kafeen,A253,A265||Kontor:C117,C124,C152,C178,C149,C151,C182,C116,C110C,C127,C113,C148,C114B,C118,C180,C123,C122,C125,C184,C189,C126,C153,C115,C121,C154,C159,C186,C119,A153D,A157,A153A,A153E,A153B,A151,A153F,A161B,A153C,A150B,B113,B114,B105,B113E,B113D,B112,B111,E241,E209,E226,E223,E212,E242,E236,E211,E202,E266B,E268C,E221,E239,E234,E224,E245,E240,E243,E268A,E272B,E237,E231,E225,E204,E228,E222,E266C,E205,E207,E210,E203,E232,E244,E235,E230,E208,E246,E233,E238,E206,E272A,C254,C258,C256,C249,C259,C211,C224,C215,C226,C251,C203,C214,C233,C201,C225,C220,C253,C230,C231,C213,C205,C212,C227,C221,C223,C237,C218,C217,C252,C229,C222,C248,C235,C232,C219,C255,C228,C207,C257,C216,A254A,A215,A217,a219,A221,A218,A254B,A222,A268,A211A,A216,A214,A211,A220,A228C,A228B,A213,A263,A256,D332,D358B,E345,E394,E370,C329,E367,D322,C362,E378,D323B,E322,C312,E356A,D333,E327,C351,E362,C366,E331,E302A,E380,C359,E303,E359B,C313,C3218,C387,E386,E321,C315,E332,E352A,E383,E357B,E372,C373,C384,D323A,C327,E357A,C379,C372,E325,C381,E326,E340,C385,E365,E323,Es65,C365,E333,E302B,C363,E330,E337,E364,E379,C316,C364,E355C,C319,C349,E343,C369,C353,D330,C357,D338,E392,D323,C321,C328,C374,D337,E381,E346,E334,E382,C367,E339,C331,C317,C322,C360c,C352,E342,C314,E390,C368,E341,C376,E388,C375,E307,D340,E328,E336,C386,E366,C356,D331,C323,C355,E384,D336,E371,D334,E324,D341,C370,C377,C326,E306,D326,E368,D327,C383,C348,E338,D328,C311,C388,E396,D325,C320,D324,E369,C330,E344,E304,C358,E329,E335,C324,C354,C382,C325,E348,C371,D440,E434,D425,D428,E424,E427,E444,E429,E470A,D423,D438,D422,E456,E430,E423D,D431,E455D,E436,E453C,E446,E438,D439,D421,D433,E403,E23G,E440,D430,E423E,D434,D427,E442,D436,E402,D437,E423B,E245B,E425A,E432,D424,E426,E431,E466,E404,D435,E459,E423C,D426,D429,E422,D432,E530,E537,E542,E524,E534,E539,E533,E546,E531,E527,E536,E528,E526,E535,E523,E531B,E529,E538,E540,E525,E544,E532,E521||Laboratorium:,E156,E154A,E154,E154B,E158,E158A,E150,D150,D151,D157,D157A,D155,D153,D157B,D150A,D159,E271,E254,E256,E252,E253,E258,D254,D252,D254A,D256,D258,D254B,D260,A235A,A241,A232,A242,A235,A238,A241A,A248,A246,A228,A243,E359,D353,D356A,D358,D356B,D358A,D355,E359C,E352,D352,E351A,D356,D350A,E356,E358,E351,E355B,E357,E359A,E353,E355,E455A,E543B,E454A,E453,E456A,E455,E458,E455C,E455B,E454,E452,E453A||WC:,E124,E126,E125,E114,E159,E115,D111,D110,D121A,D115,D137,D12C,D113,D162,D114,D123C,D123,D112,A104A,A105A,A104C,A105C,B113A,B113C,B113B,F109C,F107B,E108,F109B,E107,F107,F106C,F106B,F107C,E220E,E200E,E220D,E250B,E200B,D220B,D220A,D220E,D250C,D250D,C260A,C260B,C210A,F250B,F204B,A231,D350E,D305,D350F,WC 3. etg. nord D-blokk K,WC 3. etg. D-blokk nord M,E461B,E420C,D420E,E420D,E459B,E450D,E461A,D420D,E520E,E520F,E541||";
		var rooms = new Array();
		var info = new Array();
		var loaded = loaded.split("||");
		for(var idx = 0; idx < loaded.length; idx++){
			var rest = loaded[idx].split(",");
			info[info.length] = rooms.length;
			for(var indx = 0; indx < rest.length; indx++){
				rooms[rooms.length] = rest[indx];
			}
		}
		return [rooms, info];
	}
	function addrooms(){
		var current = 0;
		var optgroup;
		var listofroominfo = getrooms();
		var currentrooms = document.getElementById("roomnr");
		for(var indx = 0; indx < listofroominfo[0].length; indx++){
			if(indx == listofroominfo[1][current]){
				var group = document.createElement('optgroup');
    			group.label = listofroominfo[0][indx];
				group.id = listofroominfo[0][indx];
    			currentrooms.appendChild(group);
				current++;
				optgroup = document.getElementById(listofroominfo[0][indx]);
			}else{
				var newroom = document.createElement('option');
    			newroom.value = listofroominfo[0][indx];
    			newroom.innerHTML = listofroominfo[0][indx];
    			optgroup.appendChild(newroom);
			}
		}
	}
	function findPrevId(){
		var idVal = 0;
		var list = getFloorArray();
		array1Floor = list[0];
		array2Floor = list[1];
		array3Floor = list[2];
		array4Floor = list[3];
		array5Floor = list[4];
		for(var listIdx = 0; listIdx < list.length; listIdx++){
			for(var elems = 0; elems < list[listIdx].length; elems++){
				idVal++;
			}
		}
		return idVal;
	}
	  
	function currentIdVal(){
		if(idVal == null){
			var idVal = findPrevId()
		}
		return this.idVal++;  
	}
	  
	function removedraw(nodeid){
		removeDrawnNode = "#nodediv"+nodeid;
		$(removeDrawnNode).remove();
	}
	
	function removeNode(nodeId){
		var nodesDisplayed = document.getElementById("theNodes"+nodeId);
		nodesDisplayed.remove(nodeId);
		removedraw(nodeId-1);
		if(!isChangingFloor){
			spliceFromArray(currentFloor, nodeId);
		}
	}
	function spliceFromArray(currentFloor, nodeId){
		switch(currentFloor){
			case 1:
			array1Floor.splice(parseInt(array1Floor.checkId(nodeId-1)),1);
			break;
			
			case 2:
			array2Floor.splice(parseInt(array2Floor.checkId(nodeId-1)),1);
			break;
			
			case 3:
			array3Floor.splice(parseInt(array3Floor.checkId(nodeId-1)),1);
			break;
			
			case 4:
			array4Floor.splice(parseInt(array4Floor.checkId(nodeId-1)),1);
			break;
			
			case 5:
			array5Floor.splice(parseInt(array5Floor.checkId(nodeId-1)),1);
			break;
		}
	}
		
	var displayedNodes = [];
	function arraynodedisplay(nodeId){
		var selectedFloor = parseInt(document.getElementById("fVal").value);
		switch(selectedFloor){
			case 1:
			return array1Floor[parseInt(array1Floor.checkId(nodeId-1))].toString();  
			break;
			
			case 2:
			return array2Floor[parseInt(array2Floor.checkId(nodeId-1))].toString(); 
			break;
			
			case 3:
			return array3Floor[parseInt(array3Floor.checkId(nodeId-1))].toString(); 
			break;
			
			case 4:
			return array4Floor[parseInt(array4Floor.checkId(nodeId-1))].toString(); 
			break;
			
			case 5:
			return array5Floor[parseInt(array5Floor.checkId(nodeId-1))].toString(); 
			break;
		}
	}
	function addNodeToList(displayId){
		var parentElement = document.getElementById("theNodes");
		var itemElementID = String("theNodes"+displayId);
		var itemElement = document.getElementById(itemElementID);
		var itemDisplayText = arraynodedisplay(displayId);
   		var newList= document.createElement("li");
    	var newText = document.createTextNode(itemDisplayText);
		newList.setAttribute("id", itemElementID);
    	newList.appendChild(newText);
		newList.innerHTML += " <a href='#' onclick='removeNode("+displayId+")'>Remove this</a>";
   		parentElement.appendChild(newList);
	}
	function displayNodes() {
		var displayId = nextId+1;
		addNodeToList(displayId);
	}
</script>
	</div>
</div>
</body>
</html>
