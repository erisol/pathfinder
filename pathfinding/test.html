<!doctype html>
<html>
<head>
<script src="Cords.js"></script>
<script src="Edge.js"></script>
<script src="Cost.js"></script>
<script src="Node.js"></script>
<meta charset="utf-8">
<title>Test</title>
</head>

<body>
<button type="button" onclick="createnodes()">Make nodes</button>
<button type="button" onclick="drawnodetest()">Draw Lines between nodes</button>
<canvas id="drawtestcanvas" width="1000" height="600" style="border:2px solid #d3d3d3;">
Your browser does not support the HTML5 canvas tag.</canvas>
<script>
function createnodes(){
	nodes = new Array();
	try{
		for(var x = 0; x < 4; x++){
			nodes.push(new Node(x,10+150*x,10+150*x));
		}
	}catch(createnodeerr){
		console.log("(TEST)Could not create nodes: \n" + createnodeerr);
	}
	//Legger inn kanter til nodene.
	try{
		nodes[0].addneighbor(0,1,1);
		nodes[1].addneighbor(0,0,1);
		//Heiskant
		nodes[1].addneighbor(2,2,1);
		nodes[2].addneighbor(0,1,1);
		//Trappkant
		nodes[2].addneighbor(1,3,1);
		nodes[3].addneighbor(0,2,1);
		//Tester metode får å endre kordinater.
	}catch(adderr){
		console.log("(TEST)Could not add neighbors to nodes: \n" + adderr);
	}
	nodes[2].setCords(120, 343);
	//Skrur på Handicap.
	for(var s = 0; s < nodes.length; s++){
		nodes[s].handicap();
		//Sjekker om alle trapper er i "Handicap-mode"
		edge = nodes[s].getneighbors()
		for(var indx = 0; indx < edge.length; indx++){
			if(edge[indx].getType() === 1 && edge[indx].getCost() !== 1000){
				console.log("(TEST)Error changing to handicap mode");
			}		
		}
		//Skriver ut alle noder og dens edges til console.
		/*console.log(nodes[s].toString() +"\n"+ nodes[s].printneighbors());*/
	}
	
	//Tester metode får å sette optimal path får å komme til en node i grafen.
	check = nodes[2].setOptimalCostPath(22, 1);
	if(check && (nodes[2].getPrevNode() !== 1 || nodes[2].getCost() !== 22)){
			console.log("(TEST)Something went wrong adding new optimal path");
	}
	
	
	var cost = new Cost();
	cost.add(10);
	cost.add(20);
	if(cost.getCost() !== 30){
		console.log("(TEST)Something went wrong when adding cost");
	}
}
function drawnodetest(){
var c=document.getElementById("drawtestcanvas");
var ctx=c.getContext("2d");
ctx.beginPath();
ctx.lineWidth = 2;
ctx.fillStyle = "#FF0000";
nodesize = 15;
ctx.fillRect(nodes[0].getCords().getXCord()-nodesize/2, nodes[0].getCords().getYCord()-nodesize/2, nodesize, nodesize);
ctx.fillRect(nodes[1].getCords().getXCord()-nodesize/2, nodes[1].getCords().getYCord()-nodesize/2, nodesize, nodesize);
ctx.fillRect(nodes[2].getCords().getXCord()-nodesize/2, nodes[2].getCords().getYCord()-nodesize/2, nodesize, nodesize);
ctx.fillRect(nodes[3].getCords().getXCord()-nodesize/2, nodes[3].getCords().getYCord()-nodesize/2, nodesize, nodesize);
ctx.moveTo(nodes[0].getCords().getXCord(), nodes[0].getCords().getYCord());
ctx.lineTo(nodes[1].getCords().getXCord(), nodes[1].getCords().getYCord());
ctx.lineTo(nodes[2].getCords().getXCord(), nodes[2].getCords().getYCord());
ctx.lineTo(nodes[3].getCords().getXCord(), nodes[3].getCords().getYCord());
ctx.stroke();
}
</script>

</body>
</html>
